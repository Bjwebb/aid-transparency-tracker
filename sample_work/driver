#!/usr/bin/env python

import sys
import uuid
import json

from sample_work import SampleOrgTest, DocumentLinks

def run():
    org_ids = [1, 2]
    test_ids = [52, 53]

    oo = [o for o in get_objects_for_orgs_and_tests(org_ids, test_ids)]
    print json.dumps(oo, indent=2)

def get_objects_for_orgs_and_tests(org_ids, test_ids):
    for org_id in org_ids:
        for test_id in test_ids:
            sot = SampleOrgTest(org_id, test_id)
            if not sot.qualifies():
                continue
            act_ids = sot.activity_ids()
            sample_ids = sot.sample_activity_ids(10)

            for act_id in sample_ids:
                act = sot.xml_of_activity(act_id)
                
                u = str(uuid.uuid4())

                args = {
                    "uuid": u,
                    "organisation_id": org_id,
                    "test_id": test_id,
                    "activity_id": act_id[0],
                    "package_id": act_id[1],
                    "xml_data": act
                    }

                yield args
                


if __name__ == '__main__':
    run()    

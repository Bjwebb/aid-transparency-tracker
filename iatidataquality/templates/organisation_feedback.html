{% set active_page='organisations'%}{% extends "layout.html" %}
{% block title %}Publication structure &raquo; {{organisation.organisation_name}} &raquo; Organisations{% endblock %}
{% block content %}
	<h1>Organisation: <a href="{{url_for('organisations', organisation_code=organisation.organisation_code)}}">{{organisation.organisation_name}}</a> <code>{{organisation.organisation_code}}</code></h1>
    <h3>Tell us how you structure your data</h3>
    <p >IATI allows organisations to structure their data according to their own business model. We know that different organisations have used this feature to place different information in different places - for example, project documents only at "program" level (<code>hierarchy 1</code>) and transactions only at "project" level (<code>hierarchy 2</code>).</p>
    <p>Specifying that information is not used at a certain level will be accepted and will not count against an organisation's score, as long as that information is provided elsewhere. For example, if transactions are not provided at "program" level (<code>hierarchy 1</code>), they must be provided at "project" level (<code>hierarchy 2</code>).</p>
    <p><a class="btn btn-success" href="#addFeedback" role="button" data-toggle="modal"><i class="icon-white icon-plus"></i> <b>Add conditions</b></a></p>
    <form name="organisationfeedback" method="post" action="">
    <table class="table" id="conditions">
    <thead>
    <th>Conditions</th><th></th>
    </thead>
    <tbody>
    </tbody>
    </table>
    <input type="submit" value="Submit structure" class="btn" name="submitstructure"/>
    </form>

    <div id="addFeedback" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="addFeedbackModalLabel" aria-hidden="true"> 
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
            <form method="post" action="">
            <h3 id="addFeedbackModalLabel">Add conditions for {{organisation.organisation_code}}</h3>
        </div>
        <div class="modal-body">
            <p>Add qualifications of where you use or don't use different elements.</p>
            <table class="table">
            <tbody>
            <tr>
            <td>Use / don't use</td>
            <td><select id="uses">
                <option value="does not use">Don't use</option>
                <option value="uses">Use</option>
            </select></td>
            </tr>
            <tr>
            <td>Element</td>
            <td><select id="element">
                <option value="title">title</option>
                <option value="description">description</option>
            </select></td>
            </tr>
            <tr>
            <td>Where</td>
            <td> <select id="where">
                <option value="activity hierarchy 1">activity hierarchy 1</option>
                <option value="activity hierarchy 2">activity hierarchy 2</option>
                <option value="activity hierarchy 3">activity hierarchy 3</option>
                <option value="activity level">activity level</option>
                <option value="transaction level">transaction level</option>
            </select>
            </td>
            </tr>
            </tbody>
            </table>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            <a id="addfeedbackbtn" class="btn btn-success">Add structure</a>
        </div>
    </form>
    </div>
<script type="text/javascript">
    $(document).on("click", ".deletefeedback", function(e){
        e.preventDefault();
        var feedbackid = $(this).attr('data-feedback-id');
        $("#feedback"+feedbackid).remove();
    });
    var countfeedback = 0;
    $("#addfeedbackbtn").click(function(){
        countfeedback ++;
        var uses = $("#uses option:selected").val();
        var element = $("#element option:selected").val();
        var where = $("#where option:selected").val();
        $("#conditions tbody").append('<tr id="feedback' + countfeedback + '"><td>{{organisation.organisation_code}} ' + $("#uses option:selected").val() + ' ' + $("#element option:selected").val() + ' at ' + $("#where option:selected").val() + '<input type="hidden" name="feedback" value="' + countfeedback + '" /><input type="hidden" name="uses' + countfeedback + '" value="' + uses + '" /><input type="hidden" name="element' + countfeedback + '" value="' + element + '" /><input type="hidden" name="where' + countfeedback + '" value="' + where + '" /></td><td><a href="" class="deletefeedback" data-feedback-id="' + countfeedback + '"><i class="icon-trash"></i></td></tr>');
        $("#addFeedback").modal('hide');
    });

</script>

{% endblock %}
